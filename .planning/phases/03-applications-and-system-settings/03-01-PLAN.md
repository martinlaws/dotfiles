---
phase: 03-applications-and-system-settings
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - config/Brewfile.apps
  - scripts/install-apps.sh
autonomous: true

must_haves:
  truths:
    - "User can choose to install all apps with single selection"
    - "User can select specific categories (Browsers, Dev Tools, etc.)"
    - "User can select individual apps within categories"
    - "Apps are organized by priority (essential, recommended, optional)"
    - "Failed installations are reported without halting entire process"
  artifacts:
    - path: "config/Brewfile.apps"
      provides: "Categorized GUI application definitions"
      contains: ["cask \"google-chrome\"", "cask \"cursor\"", "cask \"slack\""]
    - path: "scripts/install-apps.sh"
      provides: "Interactive app installation with selection flow"
      min_lines: 100
  key_links:
    - from: "scripts/install-apps.sh"
      to: "config/Brewfile.apps"
      via: "brew bundle with generated Brewfile"
      pattern: "brew bundle.*Brewfile"
    - from: "scripts/install-apps.sh"
      to: "scripts/lib/ui.sh"
      via: "source library"
      pattern: "source.*ui\\.sh"
---

<objective>
Create the GUI application installation system with interactive selection flow

Purpose: Enable users to install their curated apps via beautiful CLI prompts - choosing all, by category, or individual apps
Output: Brewfile.apps with categorized cask definitions, install-apps.sh with gum-based selection UI
</objective>

<execution_context>
@/Users/mlaws/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mlaws/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-applications-and-system-settings/03-CONTEXT.md
@.planning/phases/03-applications-and-system-settings/03-RESEARCH.md
@scripts/lib/ui.sh
@scripts/install-tools.sh
@config/Brewfile
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create categorized Brewfile.apps</name>
  <files>config/Brewfile.apps</files>
  <action>
Create Brewfile.apps with all GUI applications from phase context, organized by category with priority markers in comments.

Categories and apps (from 03-CONTEXT.md):

### Browsers ###
cask "google-chrome"         # (essential) Primary browser
cask "dia"                   # (recommended) Daily driver browser
cask "firefox"               # (optional) Alternative browser

### Dev Tools ###
cask "visual-studio-code"    # (essential) Primary code editor
cask "cursor"                # (recommended) AI-powered code editor
cask "hyper"                 # (recommended) Terminal emulator
cask "claude"                # (recommended) Claude Desktop
cask "docker"                # (optional) Container platform
cask "postman"               # (optional) API testing

### Communication ###
cask "slack"                 # (essential) Team communication
cask "zoom"                  # (recommended) Video conferencing
cask "discord"               # (optional) Community chat

### Creative ###
cask "figma"                 # (recommended) Design tool
cask "descript"              # (optional) Audio/video editing
cask "bambu-studio"          # (optional) 3D printing

### Utilities ###
cask "raycast"               # (recommended) Productivity launcher

### Productivity ###
cask "notion"                # (recommended) Note-taking
cask "spotify"               # (recommended) Music streaming

### Gaming ###
cask "steam"                 # (optional) Game platform
cask "battle-net"            # (optional) Blizzard games

Include header comment explaining:
- Install all: brew bundle install --file=config/Brewfile.apps
- Partial install: Script generates filtered Brewfile based on selection

Note: Claude Code is installed via CLI (brew "claude" in Brewfile), not cask.
  </action>
  <verify>
cat config/Brewfile.apps | grep -c "cask" returns count of casks (should be ~19)
cat config/Brewfile.apps | grep "### Browsers ###" shows category headers exist
  </verify>
  <done>
Brewfile.apps contains all apps from context, organized by 7 categories with priority markers in comments
  </done>
</task>

<task type="auto">
  <name>Task 2: Create app installation script with selection flow</name>
  <files>scripts/install-apps.sh</files>
  <action>
Create install-apps.sh following established patterns from install-tools.sh.

**Selection Flow (from 03-CONTEXT.md decisions):**

1. Initial prompt with gum choose (not --no-limit, single selection):
   - "Install all (recommended)"
   - "Choose categories"
   - "Choose individual apps"

2. If "Install all": Use full Brewfile.apps

3. If "Choose categories": Use gum choose --no-limit with categories:
   - "Browsers (essential)"
   - "Dev Tools (recommended)"
   - "Communication (essential)"
   - "Creative (optional)"
   - "Utilities (recommended)"
   - "Productivity (recommended)"
   - "Gaming (optional)"

4. If "Choose individual apps": Show all apps grouped by category using gum choose --no-limit

**Implementation requirements:**
- Source ui.sh and detect.sh libraries
- Check brew availability before running
- Generate temporary Brewfile with only selected apps
- Use brew bundle check for idempotency
- Use brew bundle install with spinner
- Check for partial failures after install
- Report failed apps but allow continuation
- Clean up temporary Brewfile after

**Key patterns from research:**
- Parse Brewfile.apps to extract app lists per category
- Use HEREDOC to generate temporary filtered Brewfile
- Error handling pattern from install-tools.sh

**Gum usage:**
- Single selection: gum choose (no flags)
- Multi-selection: gum choose --no-limit
- All items should show priority labels to guide choice

**Exit handling:**
- If user cancels selection (empty result), exit gracefully
- Export SKIPPED_APPS for report script if partial installation
  </action>
  <verify>
bash -n scripts/install-apps.sh returns no syntax errors
grep -c "gum choose" scripts/install-apps.sh shows at least 3 occurrences (mode, categories, individual)
grep "source.*ui.sh" scripts/install-apps.sh shows library sourced
  </verify>
  <done>
install-apps.sh provides three-way selection flow (all/categories/individual), generates filtered Brewfile, installs with error handling
  </done>
</task>

</tasks>

<verification>
1. Syntax check: `bash -n scripts/install-apps.sh` passes
2. Brewfile.apps parseable: `brew bundle check --file=config/Brewfile.apps` runs without parse errors
3. All apps from context included: grep for chrome, cursor, slack, raycast, spotify, steam
4. Categories properly delimited: grep "###" shows 7 category headers
5. Script sources required libraries: grep for ui.sh and detect.sh
</verification>

<success_criteria>
- Brewfile.apps contains all 19 apps from context in 7 categories
- install-apps.sh runs without syntax errors
- Script provides three selection modes via gum choose
- Script handles partial installation failures gracefully
- Script follows established patterns (ui.sh, error handling, idempotency check)
</success_criteria>

<output>
After completion, create `.planning/phases/03-applications-and-system-settings/03-01-SUMMARY.md`
</output>
